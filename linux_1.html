---
layout: page
permalink: /Linux_1/
title: Linux_1
comments: true
---
<div id="header-wrapper">
	<div id="header" class="container">
		<div id="menu">
			<ul>
				<li><a href="{{ site.url }}" accesskey="1" title="Homepage">Homepage</a></li>
				<li class="active"><a href="{{ site.url }}Linux_1" accesskey="2" title="Linux_1">Linux_1</a></li>
				<li><a href="{{ site.url }}Linux_2" accesskey="3" title="Linux_2">Linux_2</a></li>
				<li><a href="{{ site.url }}Linux_3" accesskey="4" title="Linux_3">Linux_3</a></li>
				<li><a href="{{ site.url }}Linux_4" accesskey="5" title="Linux_4">Linux_4</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="back1">
	<div class="wrapper">
		<div id="welcome" class="container">
    		<div class="title">
				<h2>Linux 1</h2>
				<h3>Shell</h3>
			</div>
			<p>To download codes, <a id="link1" href="{{ site.url }}#codes">CLICK HERE</a><a id="link2" href="#footer-small">CLICK HERE</a>! And here you can download <a href="https://raw.githubusercontent.com/MichaelTong/OSCourseDesign/master/reports/report1.pdf">Chinese Version</a>.</p>
		</div>
		<div id="index">
			<ul><a href="#C1"><strong><big>1 Requirements</big></strong></a></ul>
				<ul><a href="#C11"><b>1.1 Basic Functions</b></a></ul>
					<ul><a href="#C111"><small>1.1.1 Internal Commands</small></a></ul>
					<ul><a href="#C112"><small>1.1.2 Switch Between Front and Back Ends</small></a></ul>
					<ul><a href="#C113"><small>1.1.3 I/O Redirection</small></a></ul>
				<ul><a href="#C12"><b>1.2 Advanced Functions</b></a></ul>
					<ul><a href="#C121"><small>1.2.1 Pipe</small></a></ul>
					<ul><a href="#C122"><small>1.2.2 Wildcard</small></a></ul>
				<ul><a href="#C13"><b>1.3 Self-improved Functions</b></a></ul>
					<ul><a href="#C131"><small>1.3.1 Up and Down Keys</small></a></ul>
					<ul><a href="#C132"><small>1.3.2 Tab Key</small></a></ul>
					<ul><a href="#C133"><small>1.3.3 Backspace Key</small></a></ul>
					<ul><a href="#C134"><small>1.3.4 Improved Grammar</small></a></ul>
					<ul><a href="#C135"><small>1.3.5 Method of giving results of backend command</small></a></ul>
			<ul><a href="#C2"><strong><big>2 Design Description</big></strong></a></ul>
				<ul><a href="#C21"><b>2.1 Structure Design</b></a></ul>
					<ul><a href="#C211"><small>2.1.1 Grammar State Graph</small></a></ul>
					<ul><a href="#C212"><small>2.1.2 Program Structure Graph</small></a></ul>
					<ul><a href="#C213"><small>2.1.3 Terminal Control Procedure Graph</small></a></ul>
					<ul><a href="#C214"><small>2.1.4 Tab Making Up Procedure Graph</small></a></ul>
					<ul><a href="#C215"><small>2.1.5 Simple Commands Execution Procedure Graph</small></a></ul>
					<ul><a href="#C216"><small>2.1.6 Complex Commands Execution Procedure Graph</small></a></ul>
					<ul><a href="#C217"><small>2.1.7 Wildcard Procedure</small></a></ul>
					<ul><a href="#C218"><small>2.1.8 Use Case Graph</small></a></ul>	
				<ul><a href="#C22"><b>2.2 Function Design</b></a></ul>
					<ul><a href="#C221"><small>2.2.1 Important Data Structures</small></a></ul>
					<ul><a href="#C222"><small>2.2.2 Important Functions and Interfaces</small></a></ul>
			<ul><a href="#C3"><strong><big>3. Test and Use Instruction</big></strong></a></ul>
					<ul><a href="#C31"><b>3.1 Use</b></a></ul>
					<ul><a href="#C32"><b>3.2 Test</b></a></ul>
		</div>
		<div id="doc">
			<h3 id="C1">1 Requirements</h3>
			<h4 id="C11">1.1 Basic Functions</h4>
			<p>This program give a command prompt with format <span class="grey">xsh@current_path></span>, such as <span class="grey">xsh@/home/tong/shell></span>, indicating that it is waiting for the user to input commands. After input, it will execute the command and output necessary information if the commands are correct, and then wait for the next command. Otherwise, it will print error information.</p>
			<h5 id="C111">1.1.1 Internal Commands</h5>
			<b>(1) exit</b>
			<p>Kill all sub processes and exit.</p>
			<b>(2) jobs</b>
			<p>Print jobs that are running in back end or suspended. The print format is</p> 
			<pre class="grey">INDEX		PID		STATE	  COMMAND</pre>
			<p>jobs is a internal command, it won't be printed on the screen.</p>
			<b>(3) history</b>
			<p>List the most recent HISTORY_LEN commands.</p>
			<b>(4) fg %<int></b>
			<p>Put a process identified with <int> in front end. The shell shouldn't print new information until this command ends.</p>
			<b>(5) bg %<int></b>
			<p>Put a suspended process to the back end and run.</p>
			<h5 id="C112">1.1.2 Switch Between Front and Back Ends</h5>
			<p>This program can execute front end jobs and back end jobs. The difference between these two is: shell has to wait until the front end job to end, while it should print prompt once starts executing back end jobs.</p>
			<p>When executing front end jobs, you should just give the path, but if it is back end job, you should add '&' sign at the end of the prompt.</p>
			<p>Besides, you can switch between front and back ends using:</p>
			<pre class="grey">Ctrl  +  Z</pre>
			<p>It will produce <span class="grey">SIGTSTP</span> signal. This signal won't suspend shell, but the shell suspends the front end job. If there is no front end job running, the combined keys won't take effects.</p>
			<p>Another combined keys:</p>
			<pre class="grey">Ctrl  +  C</pre>
			<p>will produce <span class="grey">SIGINT</span>signal. This signal won't terminate shell, but the shell will terminate any front end jobs. If there is no front end jobs running, the combined keys won't take effects.</p>			
			<h5 id="C113">1.1.3 I/O Redirection</h5>
			<p>There may be metacharacters '<' or '>' following a command. They indicate input or output redirections. There will be a file name following the redirection signs. If the output file does not exist, a new file will be created. If an input file does not exist, an error will occur.</p>

			<h4 id="C12">1.2 Advanced Functions</h4>
			<h5 id="C121">1.2.1 Pipe</h5>
			<p>When several commands are splitted by metacharacter '|', they can be placed in one command line. This metacharacter stands for pipe character. In this case, the shell will create a sub process or each sub commands, and it will link their I/O using pipes. This form of jobs will only end when all sub processes end.</p>
			<h5 id="C122">1.2.2 Wildcard</h5>
			<p>In this program, you can use wildcards '*' and '?' to match file or directory names. '*' indicates any string including empty string, and '?' indicates any single character.</p>
			<h4 id="C13">1.3 Self-improved Functions</h4>
			<h5 id="C131">1.3.1 Up and Down Arrows</h5>
			<p>Through I/O programming, the code for up and down arrows won't be displayed on the screen, instead it will scan through the history commands.</p>
			
			<h5 id="C132">1.3.2 Tab Key</h5>
			<p>Through I/O programming, the code for tab key won't be displayed on the screen. Instead, you can use tab key to make up command like real shells. If there are more that one commands that matach the head, all of the possible commands will be displayed with another hit on Tab key.</p>
			
			<h5 id="C133">1.3.3 Backspace Key</h5>
			<p>Through I/O programming, the code for backspace key won't be displayed on the screan. instead we implemented its delete function.</p>
			
			<h5 id="C134">1.3.4 Improved Grammar</h5>
			<p>The improved grammar provides support for wildcards and complex commands with pipes.</p>
			
			<h5 id="C135">1.3.5 Method of giving results of backend command</h5>
			<p>The results for back end command will not be printed until next hit on enter key after finished.</p>
			
			<h3 id="C2">2 Design Description</h3>
			
			<h4 id="C21">2.1 Structure Design</h4>
			<h5 id="C211">2.1.1 Grammar State Graph</h5>
			<h5 id="C212">2.1.2 Program Structure Graph</h5>
			<h5 id="C213">2.1.3 Terminal Control Procedure Graph</h5>
			<h5 id="C214">2.1.4 Tab Making Up Procedure Graph</h5>
			<h5 id="C215">2.1.5 Simple Commands Execution Procedure Graph</h5>
			<h5 id="C216">2.1.6 Complex Commands Execution Procedure Graph</h5>
			<h5 id="C217">2.1.7 Wildcard Procedure</h5>
			<h5 id="C218">2.1.8 Use Case Graph</h5>
			
			<h4 id="C22">2.2 Function Design</h4>
			<h5 id="C221">2.2.1 Important Data Structures</h5>
			<h5 id="C222">2.2.2 Important Functions and Interfaces</h5>
			
			<h3 id="C3">3 Test and Use Instruction</h3>
			<h4 id="C31">3.1 Use</h4>
			<h4 id="C32">3.2 Test</h4>			
		</div>
	</div>
</div>
